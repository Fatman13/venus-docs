(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{374:function(e,t,a){"use strict";a.r(t);var s=a(25),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"mining-filecoin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mining-filecoin"}},[e._v("#")]),e._v(" Mining Filecoin")]),e._v(" "),a("p",[e._v("This section provides an overview of how mining works as well as a step-by-step guide to mining on the Filecoin network.")]),e._v(" "),a("h2",{attrs:{id:"table-of-contents"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#table-of-contents"}},[e._v("#")]),e._v(" Table of contents")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#mining-filecoin"}},[e._v("Mining Filecoin")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#table-of-contents"}},[e._v("Table of contents")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#what-is-mining"}},[e._v("What is mining?")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#start-mining"}},[e._v("Start mining")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#explore-mined-blocks"}},[e._v("Explore mined blocks")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#set-your-price-for-storage"}},[e._v("Set your price for storage")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#accept-a-deal-and-get-paid"}},[e._v("Accept a deal and get paid")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#stop-mining"}},[e._v("Stop mining")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#advanced-options"}},[e._v("Advanced options")]),e._v("\n- "),a("a",{attrs:{href:"#specify-where-client-data-is-stored"}},[e._v("Specify where client data is stored")])])])])]),e._v(" "),a("h2",{attrs:{id:"what-is-mining"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-is-mining"}},[e._v("#")]),e._v(" What is mining?")]),e._v(" "),a("p",[e._v('In most blockchain protocols, "miners" are the participants on the network that do the work necessary to advance the blockchain and maintain its validity. For providing these services, miners are compensated in the native cryptocurrency. The term "miner" emerged in the initial Proof-of-Work era, comparing the work done by hardware miners using computational power to secure blockchains with that of gold miners whom expended vast physical resources for a chance at a large payout.')]),e._v(" "),a("p",[e._v("The Filecoin network will have multiple types of miners:")]),e._v(" "),a("ul",[a("li",[a("strong",[e._v("Storage miners")]),e._v(", responsible for storing files and data on the network.")]),e._v(" "),a("li",[a("strong",[e._v("Retrieval miners")]),e._v(", responsible for providing quick pipes to retrieve files.")]),e._v(" "),a("li",[a("strong",[e._v("Repair miners")]),e._v(", which are to be implemented.")])]),e._v(" "),a("p",[e._v("In the current implementation, the focus is mostly on storage miners, which sell storage capacity in exchange for FIL.")]),e._v(" "),a("p",[e._v("After the daemon has finished syncing and validating the chain, a miner can be created straight away. Mining blocks on the Filecoin network requires committing storage capacity to the network. Blocks are mined and block rewards earned in equal proportion to the amount of storage committed.")]),e._v(" "),a("h2",{attrs:{id:"start-mining"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#start-mining"}},[e._v("#")]),e._v(" Start mining")]),e._v(" "),a("p",[e._v('To create a miner, a sector size and pledge collateral must be included, as well as "gas"; a small fee provided to send the pledge message to the Filecoin blockchain, similar to a postage stamp.')]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Generate the proof parameters for proving/verification")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("./go-sectorbuilder/paramcache\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Create a miner with 100 FIL as collateral, using the default sector size (256MiB), with a message gas price of 0.001 FIL/unit and limit of 300 gas units:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("go-filecoin miner create "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("100")]),e._v(" --gas-price"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.001")]),e._v(" --gas-limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("300")]),e._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# this may take a minute")]),e._v("\n")])])])])]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("NOTICE:")]),e._v(" This step may take about a minute to process, but if it hangs for longer, double-check that "),a("code",[e._v("(gas-price * gas-limit)")]),e._v(" is less than "),a("code",[e._v("$YOUR_WALLET_BALANCE")]),e._v(".")])]),e._v(" "),a("p",[e._v("When successful, it returns the miner address of the newly created miner.")]),e._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[e._v("Once the miner is created, run the following to start mining:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("go-filecoin mining start\n")])])])])]),e._v(" "),a("h2",{attrs:{id:"explore-mined-blocks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#explore-mined-blocks"}},[e._v("#")]),e._v(" Explore mined blocks")]),e._v(" "),a("p",[e._v("The Filecoin blockchain can be explored using the community-managed block explorers "),a("a",{attrs:{href:"https://filscout.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("filscout.io"),a("OutboundLink")],1),e._v(", "),a("a",{attrs:{href:"https://filscan.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("filscan.io"),a("OutboundLink")],1),e._v(", and "),a("a",{attrs:{href:"https://filfox.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("filfox.io"),a("OutboundLink")],1),e._v(", or via the command line.  For example, to retrieve the "),a("code",[e._v("blockID")]),e._v(" of the very first block -- or the 'head block' -- of the blockchain:")]),e._v(" "),a("ol",[a("li",[e._v("Show the chain head and copy the a block ID (there may be more than one):"),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("go-filecoin chain "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("head")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# returns JSON including the <blockID> of the chain head")]),e._v("\n")])])])]),e._v(" "),a("li",[e._v("Then, view the contents of that block with "),a("code",[e._v("show block")]),e._v(":"),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("go-filecoin show block "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("blockID"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])])])]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("NOTICE:")]),e._v(" Many commands also support a "),a("code",[e._v("--enc=json")]),e._v(" option for machine-readable output.")])]),e._v(" "),a("h2",{attrs:{id:"set-your-price-for-storage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set-your-price-for-storage"}},[e._v("#")]),e._v(" Set your price for storage")]),e._v(" "),a("p",[e._v("In the Filecoin storage market, miners run a command that sets their price for storage by creating an "),a("em",[e._v("ask order")]),e._v(". This ask order provides the miners available storage capacity as well as the price per unit they are requesting. Clients propose "),a("em",[e._v("deals")]),e._v(" to miners for the files they want to store. Setting a price requires the following values:")]),e._v(" "),a("ol",[a("li",[e._v("The price at which you are willing to sell that much storage (in "),a("code",[e._v("FIL/byte/block")]),e._v(").")]),e._v(" "),a("li",[e._v("The number of blocks for which this asking price is valid.")]),e._v(" "),a("li",[e._v("The price to pay for each gas unit consumed mining this message (in FIL).")]),e._v(" "),a("li",[e._v("The maximum number of gas units to be consumed by this message.")])]),e._v(" "),a("p",[e._v("Let's set our price!")]),e._v(" "),a("ol",[a("li",[e._v("Set the price to 0.000000001 FIL/byte/block, valid for 2880 blocks, with a message gas price of 0.001 FIL/unit and limit of 1000 gas units:"),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("go-filecoin miner set-price --gas-price"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.001")]),e._v(" --gas-limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1000")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.000000001")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2880")]),e._v("\n")])])])]),e._v(" "),a("li",[e._v("Once complete, check "),a("code",[e._v("client list-asks")]),e._v(" for your miner address to ensure it has been set:"),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("go-filecoin client list-asks --enc"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("json "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" jq\n")])])])])]),e._v(" "),a("h2",{attrs:{id:"accept-a-deal-and-get-paid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#accept-a-deal-and-get-paid"}},[e._v("#")]),e._v(" Accept a deal and get paid")]),e._v(" "),a("p",[e._v("Clients propose storage deals to miners who have enough storage and at a price that they are willing to accept.  Currently, miners accept all deals that are proposed to them by clients with sufficient funds. Payment validation is done automatically, and not additional input is required to accept a deal that covers the asking price.  Deal payments are implemented using Filecoin's built-in payment channels. Thus, miners are periodically credited funds in a payment channel throughout the lifetime of the deal.")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("To see all deals your miner has made:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("go-filecoin deals list --miner\n")])])])]),e._v(" "),a("li",[a("p",[e._v("A list containing metadata about deals will be printed out, like so:")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"minerAddress"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"t2mpmyigmpopcwguhe2tpdeonoppuht5mtvd2ljcq"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"pieceCid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"/"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"QmbHmUVAkqZjQXgifDady7m5cYprX1fgtGaTYxUBBTX3At"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"proposalCid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"/"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"zDPWYqFD8U3ktr58iiqWTwzEV3sKyz7SGQjLg1zKS1Mgpo5N2nr1"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"state"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"staged"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])]),e._v(" "),a("li",[a("p",[e._v("To get more information about a specific deal:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("go-filecoin deals show "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("proposal-cid"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])])])]),e._v(" "),a("p",[e._v("In the above example "),a("code",[e._v("<proposal-cid>")]),e._v(" would be "),a("code",[e._v("zDPWYqFD8U3ktr58iiqWTwzEV3sKyz7SGQjLg1zKS1Mgpo5N2nr1")]),e._v(". It is possible to inspect the current state of a deal, how long the agreed storage period is, and how much payout will be recieved for honoring the deal.")]),e._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[e._v("When the deal duration is up you can redeem your full payment by running"),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("go-filecoin deals redeem --gas-price"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.001")]),e._v(" --gas-limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1000")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("proposal-cid"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])])])]),e._v(" "),a("p",[e._v("This will submit a message to the blockchain redeeming funds from the payment channel set up in the client.  Once the output message is processed by the network, the deal's payout will be visibile in the user's wallet.")]),e._v(" "),a("h2",{attrs:{id:"stop-mining"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#stop-mining"}},[e._v("#")]),e._v(" Stop mining")]),e._v(" "),a("p",[e._v("To stop mining altogether:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("```sh\ngo-filecoin mining stop\n```\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[e._v("To remove all data associated with your Filecoin node instance:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("rm")]),e._v(" -rf ~/.filecoin\n")])])])])]),e._v(" "),a("h2",{attrs:{id:"advanced-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#advanced-options"}},[e._v("#")]),e._v(" Advanced options")]),e._v(" "),a("h4",{attrs:{id:"specify-where-client-data-is-stored"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#specify-where-client-data-is-stored"}},[e._v("#")]),e._v(" Specify where client data is stored")]),e._v(" "),a("p",[e._v("There are two ways to specify the location of the sector storage directory:")]),e._v(" "),a("ul",[a("li",[e._v("the "),a("code",[e._v("sectorbase.rootdir")]),e._v(" config entry")]),e._v(" "),a("li",[e._v("the "),a("code",[e._v("--sectordir")]),e._v(" option to "),a("code",[e._v("go-filecoin init")])])]),e._v(" "),a("p",[e._v("If a location is not specified, the data is stored in a directory named "),a("code",[e._v(".filecoin_sectors")]),e._v(" underneath the parent directory of the Filecoin repo directory.")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("repo-dir-parent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[e._v("$HOME")]),e._v(" by default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n   repo-dir\n   .filecoin_sectors\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);