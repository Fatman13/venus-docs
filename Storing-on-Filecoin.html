<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Storing on Filecoin | Venus Filecoin</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/venus-filecoin/assets/icon-coin-128.png">
    <meta name="description" content="Venus is a Go implementation of the Filecoin Distributed Storage Network.">
    
    <link rel="preload" href="/venus-filecoin/assets/css/0.styles.fd2cc4ad.css" as="style"><link rel="preload" href="/venus-filecoin/assets/js/app.ade188a5.js" as="script"><link rel="preload" href="/venus-filecoin/assets/js/2.a315f92a.js" as="script"><link rel="preload" href="/venus-filecoin/assets/js/15.c9768e00.js" as="script"><link rel="prefetch" href="/venus-filecoin/assets/js/10.79982f23.js"><link rel="prefetch" href="/venus-filecoin/assets/js/11.a0a364ac.js"><link rel="prefetch" href="/venus-filecoin/assets/js/12.a74e2394.js"><link rel="prefetch" href="/venus-filecoin/assets/js/13.bd3d8178.js"><link rel="prefetch" href="/venus-filecoin/assets/js/14.8adb35e9.js"><link rel="prefetch" href="/venus-filecoin/assets/js/16.a7e61919.js"><link rel="prefetch" href="/venus-filecoin/assets/js/17.5e2e6093.js"><link rel="prefetch" href="/venus-filecoin/assets/js/18.fb566c4e.js"><link rel="prefetch" href="/venus-filecoin/assets/js/3.c26e6815.js"><link rel="prefetch" href="/venus-filecoin/assets/js/4.a9308c9a.js"><link rel="prefetch" href="/venus-filecoin/assets/js/5.d573531e.js"><link rel="prefetch" href="/venus-filecoin/assets/js/6.924e8610.js"><link rel="prefetch" href="/venus-filecoin/assets/js/7.db8f4db6.js"><link rel="prefetch" href="/venus-filecoin/assets/js/8.e5e8e478.js"><link rel="prefetch" href="/venus-filecoin/assets/js/9.bbac6071.js">
    <link rel="stylesheet" href="/venus-filecoin/assets/css/0.styles.fd2cc4ad.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/venus-filecoin/" class="home-link router-link-active"><img src="/venus-filecoin/assets/filecoin-logo.svg" alt="Venus Filecoin" class="logo"> <span class="site-name can-hide">Venus Filecoin</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://docs.filecoin.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Filecoin Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/filecoin-project/venus" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://docs.filecoin.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Filecoin Docs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/filecoin-project/venus" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Venus Filecoin Tutorial</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/venus-filecoin/Home.html" class="sidebar-link">Overview</a></li><li><a href="/venus-filecoin/Getting-Started.html" class="sidebar-link">Getting started</a></li><li><a href="/venus-filecoin/Mining-Filecoin.html" class="sidebar-link">Mining Filecoin</a></li><li><a href="/venus-filecoin/Storing-on-Filecoin.html" aria-current="page" class="active sidebar-link">Storing on Filecoin</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/venus-filecoin/Storing-on-Filecoin.html#table-of-contents" class="sidebar-link">Table of contents</a></li><li class="sidebar-sub-header"><a href="/venus-filecoin/Storing-on-Filecoin.html#how-to-store-on-filecoin" class="sidebar-link">How to store on Filecoin</a></li><li class="sidebar-sub-header"><a href="/venus-filecoin/Storing-on-Filecoin.html#test-filecoin-with-sample-data" class="sidebar-link">Test Filecoin with sample data</a></li><li class="sidebar-sub-header"><a href="/venus-filecoin/Storing-on-Filecoin.html#import-data" class="sidebar-link">Import data</a></li><li class="sidebar-sub-header"><a href="/venus-filecoin/Storing-on-Filecoin.html#propose-a-storage-deal" class="sidebar-link">Propose a storage deal</a></li><li class="sidebar-sub-header"><a href="/venus-filecoin/Storing-on-Filecoin.html#send-data-and-pay-miner" class="sidebar-link">Send data and pay miner</a></li><li class="sidebar-sub-header"><a href="/venus-filecoin/Storing-on-Filecoin.html#retrieving-data" class="sidebar-link">Retrieving data</a></li></ul></li><li><a href="/venus-filecoin/Troubleshooting-&amp;-FAQ.html" class="sidebar-link">Troubleshooting &amp; FAQ</a></li><li><a href="/venus-filecoin/Commands.html" class="sidebar-link">CLI commands</a></li><li><a href="/venus-filecoin/How-to-connect-two-nodes-directly.html" class="sidebar-link">Connecting two nodes directly</a></li><li><a href="/venus-filecoin/Running-a-network-locally.html" class="sidebar-link">Running a local network</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Resources</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="storing-on-filecoin"><a href="#storing-on-filecoin" class="header-anchor">#</a> Storing on Filecoin</h1> <p>This section provides instructions for making storage deals with miners and retrieving the files afterwards.</p> <h2 id="table-of-contents"><a href="#table-of-contents" class="header-anchor">#</a> Table of contents</h2> <ul><li><a href="#how-to-store-on-filecoin">How to store on Filecoin</a></li> <li><a href="#test-filecoin-with-sample-data">Test Filecoin with sample data</a></li> <li><a href="#import-data">Import data</a></li> <li><a href="#propose-a-storage-deal">Propose a storage deal</a></li> <li><a href="#send-data-and-pay-miner">Send data and pay miner</a></li> <li><a href="#retrieving-data">Retrieving data</a></li></ul> <h2 id="how-to-store-on-filecoin"><a href="#how-to-store-on-filecoin" class="header-anchor">#</a> How to store on Filecoin</h2> <p>Because Filecoin is a decentralized storage marketplace, storage clients (our term for anyone who wants to store data on the Filecoin network) propose storage deals with storage miners that they feel can meet their storage needs. Once a storage client has proposed a deal, the miner can choose to accept or reject that deal. The client then sends over the data, and the storage deal officially begins.</p> <p>In order to run the remainder of these commands, ensure a Filecoin node is installed and currently running. See the <a href="Getting-Started">getting started</a> section of this documentation for more information.</p> <h2 id="test-filecoin-with-sample-data"><a href="#test-filecoin-with-sample-data" class="header-anchor">#</a> Test Filecoin with sample data</h2> <p>It is recommended to use small test files while initially getting used to the different commands. If preferred, there is a folder of <a href="https://github.com/filecoin-project/sample-data" target="_blank" rel="noopener noreferrer">sample data<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (images, GIFs, and text files) that can be used to get started. Download this data, unzip it, and save it anywhere. In the examples below, it is assumed that the repository is saved to the Desktop (<code>~/Desktop</code>).</p> <h2 id="import-data"><a href="#import-data" class="header-anchor">#</a> Import data</h2> <p>Before storing data on the Filecoin network, import the data into the local Filecoin node:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># Start by creating a simple .txt file</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Hi my name is <span class="token environment constant">$USER</span>&quot;</span><span class="token operator">&gt;</span> hello.txt

<span class="token comment"># Import the created file into go-filecoin.</span>
<span class="token comment"># RETURN VAL: Content ID (CID) of this file.</span>
<span class="token comment"># You'll need this CID for future commands to</span>
<span class="token comment"># view, store, or retrieve this data.</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>go-filecoin client <span class="token function">import</span> ./hello.txt<span class="token variable">`</span></span>

<span class="token comment"># View the imported file</span>
<span class="token comment"># RETURN VAL: &quot;Hi my name is user1&quot;</span>
go-filecoin client <span class="token function">cat</span> <span class="token variable">$CID</span>
</code></pre></div><p>To import files from the local machine:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># Import an image from the sample data. Returns</span>
<span class="token comment"># its CID which you'll need for the next step.</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>go-filecoin client <span class="token function">import</span> ~/Desktop/sample-data-master/camel.jpg<span class="token variable">`</span></span>

<span class="token comment"># View imported image</span>
go-filecoin client <span class="token function">cat</span> <span class="token variable">$CID</span> <span class="token operator">&gt;</span> image.jpg <span class="token operator">&amp;&amp;</span> <span class="token function">open</span> image.jpg
</code></pre></div><h2 id="propose-a-storage-deal"><a href="#propose-a-storage-deal" class="header-anchor">#</a> Propose a storage deal</h2> <p>Once the data is imported, it is possible to look through available <em>ask orders</em> from miners. Manually choose one of them and propose a storage deal.</p> <p>To see all available asks, run this command:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>go-filecoin client list-asks --enc<span class="token operator">=</span>json <span class="token operator">|</span> jq
</code></pre></div><p>A list of asks will be generated in <code>json</code> format:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;Miner&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fcqxvnl37zdv8clc26j6r43zn8md7tc2mrfx77vru&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Price&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.5&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Expiry&quot;</span><span class="token operator">:</span> <span class="token number">588</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ID&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Error&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The price is in FIL per byte per blocktime (~30s), and the expiry is the blockchain height at which the ask expires. Choose an ask from that list. For now, the biggest difference between miners will be price. In the future, miners may have other characteristics.</p> <p>Proposing a storage deal requires four parameters:</p> <ul><li><code>&lt;miner&gt;</code> address of the miner from <code>list-asks</code></li> <li><code>&lt;data&gt;</code> CID of the imported data to be stored</li> <li><code>&lt;ask&gt;</code> ID of the ask, also from <code>list-asks</code> (usually 0)</li> <li><code>&lt;duration&gt;</code> how long to store (in # of ~30sec blocktimes). For example, storing for 1 day (2 blocks/min * 60 min/hr * 24 hr/day) = 2880 blocks.</li></ul> <p>Supplied in the following command:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>go-filecoin client propose-storage-deal <span class="token operator">&lt;</span>miner<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>data<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>ask<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>duration<span class="token operator">&gt;</span>
</code></pre></div><p>If the deal is proposed correctly, it will automatically be accepted and return <code>Status: accepted</code>. Currently, a deal will fail if the required capacity exceeds what that miner has available. A deal will also fail if the client account's wallet FIL balance is insufficient to cover the asking cost over the proposed data size and duration.</p> <h2 id="send-data-and-pay-miner"><a href="#send-data-and-pay-miner" class="header-anchor">#</a> Send data and pay miner</h2> <p>As part of negotiating the deal, the <code>propose-storage-deal</code> command will automatically move the funds required for covering the deal's total into a payment channel with the storage miner.  This payment channel will periodically release payments to the storage miner across the lifetime of the deal.</p> <p>Data is automatically transferred to a staging area via the underlying <a href="https://github.com/ipfs/specs/tree/master/bitswap" target="_blank" rel="noopener noreferrer">bitswap<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> mechanism (implementation from IPFS) of Filecoin. Miners will now be required to store files on their machines and begin the sealing/proving process. Under the hood, filecoin miners automatically fire off a sealing process at a configured interval (defaulted to 120 seconds) to take all data in the miner's staging area and seal it into the miner's pledged storage sectors.  The deal status will move to &quot;staged&quot; at this point.  After sealing is complete and the miner posts its commitment to the chain, the deal status will move to &quot;posted&quot;.</p> <p>Check the deal state:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>go-filecoin client query-storage-deal <span class="token operator">&lt;</span>dealID<span class="token operator">&gt;</span>
</code></pre></div><p>Once it reads &quot;posted, you will have successfully stored your data!&quot;, the data is now available for retrieval.</p> <h2 id="retrieving-data"><a href="#retrieving-data" class="header-anchor">#</a> Retrieving data</h2> <p>Before data can be retrieved from a sealed sector, the sector must be unsealed. Sealing and unsealing times vary depending on the size of the sector, and may range from a few minutes to a few hours.</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># Retrieve your data, using the address of the</span>
<span class="token comment"># miner you made a deal with and the &lt;CID&gt; of the data.</span>
go-filecoin retrieval-client retrieve-piece <span class="token operator">&lt;</span>minerAddress<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>CID<span class="token operator">&gt;</span> <span class="token comment"># can take a minute</span>
</code></pre></div><p>Congratulations! You have now walked through several of the client commands available on Filecoin. Let us know if you have any questions by dropping a message on Slack/Matrix (#fil-help) or the <a href="https://discuss.filecoin.io/" target="_blank" rel="noopener noreferrer">community forum<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and take a look at the <a href="Troubleshooting-&amp;-FAQ">Troubleshooting &amp; FAQs page</a>.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/filecoin-project/docs/edit/master/docs/Storing-on-Filecoin.md" target="_blank" rel="noopener noreferrer">Suggest an Edit</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/8/2021, 7:01:56 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/venus-filecoin/Mining-Filecoin.html" class="prev">
        Mining Filecoin
      </a></span> <span class="next"><a href="/venus-filecoin/Troubleshooting-&amp;-FAQ.html">
        Troubleshooting &amp; FAQ
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/venus-filecoin/assets/js/app.ade188a5.js" defer></script><script src="/venus-filecoin/assets/js/2.a315f92a.js" defer></script><script src="/venus-filecoin/assets/js/15.c9768e00.js" defer></script>
  </body>
</html>
